{% assign i18n = site.data.translation %}

{% assign fruits = "zapples, oranges, peaches, banana" | split: ", " %}

{% assign videos = site.data.videos %}
{% assign posts = site.posts %}

{% for video in videos %}
    {% assign posts = posts | push: video %}
{% endfor %}

{% for fruit in posts %}
    {% assign size = posts | size %}
    {% assign j = size | subtract: forloop.index0 %}
    {% for i in (0..j) %}
        {% assign i_plus = i | plus: 1 %}
        {% assign i_plus_plus = i | plus: 2 %}
        {% assign i_minus = i | minus: 1 %}
        {% if posts[i].date > posts[i_plus].date %}
            {% assign subArray = "" | split: "/" %}
            {% for k in (0..i_minus) %}
                {% assign subArray = subArray | push: posts[k] %}
            {% endfor %}
            {% assign subArray = subArray | push: posts[i_plus] %}
            {% assign subArray = subArray | push: posts[i] %}
            {% for k in (i_plus_plus..size) %}
                {% assign subArray = subArray | push: posts[k] %}
            {% endfor %}
            {% assign posts = subArray %}
        {% endif %}
    {% endfor %}
{% endfor %}

<section id="recent-articles">
    <h2 class="section-heading">{{ i18n.recentArticles[page.lang] }}</h2>
    <ul class="article-list">
        {% for post in posts | reverse %}
            {% if forloop.index0 < 6 %}
                {% if post.type == 'youtube' %}
                    {% assign url = 'https://www.youtube.com/watch?v=' | append: post.youtube_id %}
                    {% assign target = '_blank' %}
                {% else %}
                    {% assign url = post.url | prepend: site.baseurl %}
                    {% assign target = '_self' %}
                {% endif %}

                <li class="article-item">
                    <a href="{{ url }}" rel="bookmark" target="{{ target }}">
                        <div>
                            {{ post.title }}
                            <span class="badge badge-{{post.tag}}">{{i18n[post.tag][page.lang]}}</span>
                        </div>
                        <div>{{ post.date | date: "%d/%m/%y" }}</div>
                    </a>
                </li>
            {% endif %}
        {% endfor %}
    </ul>
    <a href="{{ site.baseurl }}/blog" class="show-all">{{ i18n.showAll[page.lang] }}...</a>
</section>
